<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>È´ò‰∏≠Ëã±ÊñáÔºöÂ•ßÈÅãÁöÑÊïÖ‰∫ã (Interactive)</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Noto Sans for Chinese, Serif for English headers -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; }
        .font-serif { font-family: 'Merriweather', serif; }
        
        /* Flip Card Styles */
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Highlight Animation */
        .highlight-word {
            background-color: #fef08a; /* yellow-200 */
            border-bottom: 2px solid #fde047; /* yellow-300 */
            cursor: pointer;
            transition: all 0.2s;
            padding: 0 2px;
            border-radius: 2px;
        }
        .highlight-word:hover {
            background-color: #fde047;
            transform: translateY(-1px);
        }

        /* Hide scrollbar for tab navigation on mobile */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-blue-700 text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-4xl mx-auto px-4 py-4 md:py-6">
            <div class="flex items-center gap-3 mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-yellow-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>
                <div>
                    <h1 class="text-xl md:text-2xl font-bold leading-tight">High School English</h1>
                    <p class="text-blue-200 text-sm">The Olympic Story Â•ßÈÅãÁöÑÊïÖ‰∫ã</p>
                </div>
            </div>
            
            <!-- Navigation Tabs -->
            <nav class="flex space-x-2 bg-blue-800/50 p-1 rounded-lg overflow-x-auto no-scrollbar">
                <button onclick="switchTab('read')" id="tab-read" class="tab-btn flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-md transition-colors text-sm font-medium bg-white text-blue-700 shadow-sm whitespace-nowrap">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
                    Article Èñ±ËÆÄ
                </button>
                <button onclick="switchTab('vocab')" id="tab-vocab" class="tab-btn flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-md transition-colors text-sm font-medium text-blue-100 hover:bg-blue-600/50 whitespace-nowrap">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m5 8 5-5 5 5"/><path d="m12 13 7 7-7-7z"/><path d="M12 3v10"/><path d="m19 8-5-5-5 5"/><path d="m22 13-7 7-7-7z"/><path d="M12 21V11"/></svg>
                    Vocabulary ÂñÆÂ≠ó
                </button>
                <button onclick="switchTab('quiz')" id="tab-quiz" class="tab-btn flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-md transition-colors text-sm font-medium text-blue-100 hover:bg-blue-600/50 whitespace-nowrap">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></svg>
                    Quiz Ê∏¨È©ó
                </button>
            </nav>
        </div>
    </header>

    <!-- Main Content Area -->
    <main id="app-content" class="flex-grow max-w-4xl mx-auto w-full p-4 md:p-6 pb-20">
        <!-- Content will be injected here by JavaScript -->
    </main>

    <!-- Toast/Notification Container -->
    <div id="toast-container" class="fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50 pointer-events-none"></div>

    <!-- Footer -->
    <footer class="bg-slate-800 text-slate-400 py-6 text-center mt-auto">
        <p class="text-sm font-medium">Ancient Origins, Modern Glory: The Olympic Story</p>
        <p class="text-xs mt-1 opacity-50">¬© 2025 LiveABC Interactive Corporation</p>
    </footer>

    <!-- JavaScript Data & Logic -->
    <script>
        // --- DATA ---
        const articleData = {
            title: "Ancient Origins, Modern Glory: The Olympic Story",
            chineseTitle: "ÂæûÂè§‰ª£Á•≠ÂÖ∏Âà∞Áèæ‰ª£Ê¶ÆËÄÄÔºöÂ•ßÈÅãÁöÑÊïÖ‰∫ã",
            paragraphs: [
                {
                    id: 1,
                    english: "From ancient religious festival to modern celebration of sporting achievement, the Olympics have changed considerably over time. Today, they feature both athletic excellence and peaceful cooperation among nations.",
                    chinese: "ÂæûÂè§‰ª£ÂÆóÊïôÁØÄÊÖ∂Âà∞Áèæ‰ª£Â∞çÊñºÈ´îËÇ≤ÊàêÂ∞±ÁöÑÈ†åÊèöÔºåÂ•ßÊûóÂåπÂÖãÈÅãÂãïÊúÉÈö®ËëóÊôÇÈñìÁôºÁîü‰∫ÜÂæàÂ§ßÁöÑËÆäÂåñ„ÄÇÂ¶Ç‰ªäÔºåÂ•ßÈÅã‰∏çÂÉÖÂ±ïÁèæÈÅãÂãïÂì°ÁöÑÂçìË∂äË°®ÁèæÔºå‰πü‰øÉÈÄ≤ÂêÑÂúã‰πãÈñìÁöÑÂíåÂπ≥Âêà‰Ωú„ÄÇ",
                    keywords: ["celebration", "athletic", "cooperation"]
                },
                {
                    id: 2,
                    english: "The first Olympics took place in 776 BC in the Greek city of Olympia, where they were subsequently held every four years. Originally created to honor the god Zeus, the games held deep religious meaning. Athletic competition was paired with sacrifices and singing, and people believed Zeus decided the victors.",
                    chinese: "È¶ñÊ¨°Â•ßÊûóÂåπÂÖãÈÅãÂãïÊúÉÊñºË•øÂÖÉÂâç‰∏É‰∏ÉÂÖ≠Âπ¥Âú®Â∏åËáòÂüéÂ∏ÇÂ•ßÊûóÂåπ‰∫ûËàâË°åÔºåÊ≠§ÂæåÊØèÂõõÂπ¥ËàâËæ¶‰∏ÄÊ¨°„ÄÇÂ•ßÈÅãÊúÄÂàùÊòØÁÇ∫‰∫ÜÊï¨Â•âÂÆôÊñØÁ•ûËÄåË®≠Á´ãÔºåÂÖ∑ÊúâÊ∑±ÂéöÁöÑÂÆóÊïôÊÑèÁæ©„ÄÇÈ´îËÇ≤Á´∂Ë≥ΩËàáÁ•≠Á•ÄÂíåÊ≠åÂî±Ê¥ªÂãïÁõ∏ÁµêÂêàÔºå‰∏î‰∫∫ÂÄëÁõ∏‰ø°ÂãùÂà©ËÄÖÁî±ÂÆôÊñØÊ±∫ÂÆö„ÄÇ",
                    keywords: ["subsequently", "sacrifices"]
                },
                {
                    id: 3,
                    english: "The stadion, a roughly 180-meter sprint, was the only event for the first 13 Olympics. Gradually, new contests were introduced, including wrestling, boxing, pankration (a combat sport), and chariot racing. Winners were crowned with olive wreaths and were often paid handsomely by their home cities.",
                    chinese: "Âú®ÊúÄÂàùÁöÑÂçÅ‰∏âÂ±ÜÂ•ßÈÅãÊúÉ‰∏≠ÔºåÈ´îËÇ≤Â†¥Áü≠Ë∑ëÔºàÁ¥Ñ‰∏ÄÁôæÂÖ´ÂçÅÂÖ¨Â∞∫ÔºâÊòØÂîØ‰∏ÄÁöÑÊØîË≥ΩÈ†ÖÁõÆ„ÄÇÊº∏Êº∏Âú∞ÔºåÊñ∞ÁöÑÁ´∂Ë≥ΩÈô∏Á∫åÂºïÈÄ≤ÔºåÂåÖÊã¨ÊëîËßí„ÄÅÊã≥Êìä„ÄÅÊΩòÂÖãÊãâËæõÔºà‰∏ÄÁ®ÆÊ†ºÈ¨•ÈÅãÂãïÔºâ‰ª•ÂèäÊà∞ËªäÁ´∂Ë≥Ω„ÄÇÂãùÂà©ËÄÖÊúÉÊà¥‰∏äÊ©ÑÊ¨ñÊûùËä±ÂÜ†Ôºå‰∏¶Â∏∏Áç≤ÂÆ∂ÈÑâÂüéÂ∏ÇÈáçË≥û„ÄÇ",
                    keywords: ["combat"]
                },
                {
                    id: 4,
                    english: "Only freeborn Greek men could participate, and it‚Äôs thought that they competed naked. Women may have been excluded from even watching the Olympics. However, they had a separate festival, the Heraean Games, honoring the goddess Hera.",
                    chinese: "Áï∂ÊôÇÂè™ÊúâËá™Áî±Âá∫Ë∫´ÁöÑÂ∏åËáòÁî∑ÊÄßÂèØÂèÉË≥ΩÔºå‰∏îÊìöË™™‰ªñÂÄëÊòØË£∏È´îÂèÉÂä†ÊØîË≥Ω„ÄÇÂ•≥ÊÄßÁîöËá≥ÂèØËÉΩË¢´Á¶ÅÊ≠¢ËßÄÁúãÂ•ßÈÅãË≥Ω‰∫ã„ÄÇÁÑ∂ËÄåÔºåÂ•≥ÊÄßÂâáÊúâËá™Â∑±ÁöÑÁØÄÊÖ∂‚Äî‚ÄîËµ´ÊãâÈÅãÂãïÊúÉÔºåÁî®‰ª•Êï¨Â•âÂ•≥Á•ûËµ´Êãâ„ÄÇ",
                    keywords: ["excluded"]
                },
                {
                    id: 5,
                    english: "The games were protected by the Ekecheiria, or ‚ÄúOlympic truce.‚Äù Though not always observed, it called for a temporary peace to allow competitors and spectators from different regions to come together and enjoy the games.",
                    chinese: "Áï∂ÊôÇÁöÑÂ•ßÈÅãÂèóÂà∞Â•ßÊûóÂåπÂÖã‰ºëÊà∞ÂçîË≠∞ÔºàEkecheiriaÔºâÁöÑ‰øùË≠∑„ÄÇÈõñÁÑ∂ÈÄôÈ†ÖÂçîË≠∞‰∏¶ÈùûÁ∏ΩÊòØÈÅµÂÆàÔºå‰ΩÜÂÆÉÂëºÁ±≤Êö´ÊôÇÂÅúÊà∞ÔºåËÆì‰æÜËá™‰∏çÂêåÂú∞ÂçÄÁöÑÂèÉË≥ΩËÄÖËàáËßÄÁúæËÉΩÈΩäËÅö‰∏ÄÂ†Ç„ÄÅ‰∫´ÂèóÂ•ßÈÅãÁõõ‰∫ã„ÄÇ",
                    keywords: []
                },
                {
                    id: 6,
                    english: "In 1896, the Frenchman Pierre de Coubertin set the stage for the modern Olympic Games by organizing the first Summer Olympics in Athens. The Winter Olympics were added in 1924, and in 1960, the Paralympics joined the fold.",
                    chinese: "‰∏ÄÂÖ´‰πùÂÖ≠Âπ¥ÔºåÊ≥ïÂúã‰∫∫ÁöÆËÄ∂ÔºéÂæ∑ÔºéÂè§ÊüèÂù¶Âú®ÈõÖÂÖ∏Á±åËæ¶‰∫ÜÈ¶ñÂ±ÜÂ§èÂ≠£Â•ßÈÅãÊúÉÔºåÁÇ∫Áèæ‰ª£Â•ßÈÅãÂ•†ÂÆö‰∫ÜÂü∫Á§é„ÄÇ‰∏Ä‰πù‰∫åÂõõÂπ¥Ëµ∑Â¢ûË®≠ÂÜ¨Â≠£Â•ßÈÅãÔºå‰∏Ä‰πùÂÖ≠‚óãÂπ¥ÂâáÂä†ÂÖ•‰∫ÜÂ∏ïÊãâÊûóÂåπÂÖãÈÅãÂãïÊúÉ„ÄÇ",
                    keywords: []
                },
                {
                    id: 7,
                    english: "Currently, there are 43 sports on the Olympic program. Winners in each event are given medals (gold, silver, or bronze), and while there‚Äôs no official prize money, athletes may receive monetary rewards from their home countries or sponsors.",
                    chinese: "ÁõÆÂâçÔºåÂ•ßÈÅãÊúÉÂÖ±ÊúâÂõõÂçÅ‰∏âÁ®ÆÈÅãÂãï„ÄÇÊØèÂÄãÈ†ÖÁõÆÁöÑÂãùËÄÖÊúÉÁç≤ÂæóÁçéÁâåÔºàÈáëÁâå„ÄÅÈäÄÁâåÊàñÈäÖÁâåÔºâÔºåÈõñÁÑ∂Ê≤íÊúâÂÆòÊñπÁçéÈáëÔºå‰ΩÜÈÅãÂãïÂì°ÂèØËÉΩÊúÉÂæûËá™Â∑±ÂúãÂÆ∂ÊàñË¥äÂä©ÂïÜÈÇ£Ë£°Áç≤ÂæóÁçéÂãµ„ÄÇ",
                    keywords: ["gender", "bronze", "monetary"]
                },
                {
                    id: 8,
                    english: "Coubertin‚Äôs vision for the Olympics went beyond athleticism. He believed sport should promote strong moral character. Early guiding principles‚Äî‚Äúencouraging effort,‚Äù ‚Äúpreserving human dignity,‚Äù and ‚Äúdeveloping harmony‚Äù‚Äîremain central today.",
                    chinese: "Âè§ÊüèÂù¶Â∞çÂ•ßÈÅãÁöÑÈ°òÊôØË∂ÖË∂ä‰∫ÜÈÅãÂãïÁ´∂ÊäÄÊú¨Ë∫´„ÄÇ‰ªñË™çÁÇ∫È´îËÇ≤ÊáâÂüπÈ§äÂÅ•ÂÖ®ÁöÑÈÅìÂæ∑ÂìÅÊ†º„ÄÇÊó©ÊúüÁöÑÊåáÂ∞éÂéüÂâá‚îÄ‚îÄ„ÄåÈºìÂãµÂä™Âäõ„Äç„ÄÅ„ÄåÁ∂≠Ë≠∑‰∫∫ÁöÑÂ∞äÂö¥„Äç‰ª•Âèä„ÄåÂüπÈ§äÂíåË´ß„Äç‚îÄ‚îÄËá≥‰ªä‰ªçÊòØÊ†∏ÂøÉÂÉπÂÄº„ÄÇ",
                    keywords: ["preserving", "dignity", "harmony"]
                }
            ]
        };

        const vocabularyList = [
            { word: "celebration", part: "n.", def: "ÊÖ∂Á•ùÔºõÈ†åÊèö", example: "The party was a celebration of their victory." },
            { word: "athletic", part: "adj.", def: "ÈÅãÂãïÁöÑÔºõÈ´îËÇ≤ÁöÑ", example: "She showed great athletic ability on the field." },
            { word: "cooperation", part: "n.", def: "Âêà‰Ωú", example: "Peaceful cooperation is essential for the team." },
            { word: "subsequently", part: "adv.", def: "Èö®ÂæåÔºõÊé•Ëëó", example: "He was arrested and subsequently released." },
            { word: "sacrifice", part: "n.", def: "Á•≠Á•ÄÔºõÁäßÁâ≤", example: "Many sacrifices were made during the war." },
            { word: "combat", part: "n.", def: "Êà∞È¨•ÔºõÊ†ºÈ¨•", example: "Soldiers are trained for unarmed combat." },
            { word: "excluded", part: "v.", def: "ÊéíÈô§ÔºõË¢´ÊãíÁµï", example: "Women were excluded from voting in the past." },
            { word: "gender", part: "n.", def: "ÊÄßÂà•", example: "Discrimination based on gender is illegal." },
            { word: "bronze", part: "n.", def: "ÈùíÈäÖÔºõÈäÖÁâå", example: "He won a bronze medal in swimming." },
            { word: "monetary", part: "adj.", def: "ÈáëÈå¢ÁöÑÔºõË≤®Âπ£ÁöÑ", example: "The item has little monetary value." },
            { word: "preserve", part: "v.", def: "Á∂≠Ë≠∑Ôºõ‰øùÂ≠ò", example: "We must preserve our natural resources." },
            { word: "dignity", part: "n.", def: "Â∞äÂö¥", example: "Every human being should be treated with dignity." },
            { word: "harmony", part: "n.", def: "ÂíåË´ß", example: "They lived together in perfect harmony." },
        ];

        const quizQuestions = [
            {
                id: 1,
                question: "What was the original purpose of the ancient Olympics?",
                options: ["To win gold medals", "To honor the god Zeus", "To make money for home cities", "To train soldiers for war"],
                correct: 1
            },
            {
                id: 2,
                question: "Which event was the ONLY one held during the first 13 Olympics?",
                options: ["Chariot racing", "Wrestling", "The stadion (sprint)", "Boxing"],
                correct: 2
            },
            {
                id: 3,
                question: "What is the 'Ekecheiria'?",
                options: ["The name of the winner's crown", "The Olympic truce for peace", "A type of ancient combat sport", "The location of the first games"],
                correct: 1
            },
            {
                id: 4,
                question: "Who is considered the founder of the modern Olympic Games?",
                options: ["Zeus", "A Greek King", "Pierre de Coubertin", "An American athlete"],
                correct: 2
            }
        ];

        // --- STATE & UTILS ---
        let currentTab = 'read';
        let showChinese = true;
        let quizAnswers = {};
        let quizSubmitted = false;

        const synth = window.speechSynthesis;

        function speak(text) {
            if (synth.speaking) {
                synth.cancel();
            }
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US';
            utterance.rate = 0.9;
            synth.speak(utterance);
        }

        function highlightKeywords(text, keywords) {
            if (!keywords || keywords.length === 0) return text;
            let processedText = text;
            
            // Sort keywords by length descending to avoid replacing substrings incorrectly
            const sortedKeywords = [...keywords].sort((a, b) => b.length - a.length);

            // Use a simple replacement strategy that wraps matches in a span
            // Note: This simple regex approach works for this specific content. 
            // For more complex HTML injection, a parser is better, but this suffices for a single file demo.
            const regex = new RegExp(`\\b(${sortedKeywords.join('|')})\\w*\\b`, 'gi');
            
            return text.replace(regex, (match) => {
                return `<span class="highlight-word" onclick="handleWordClick('${match}', event)">${match}</span>`;
            });
        }

        window.handleWordClick = function(word, event) {
            event.stopPropagation();
            speak(word);
            showToast(`Selected: ${word}`);
        };

        function showToast(message) {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = 'bg-slate-900 text-white px-6 py-3 rounded-full shadow-xl mb-3 flex items-center gap-2 animate-bounce-in';
            toast.innerHTML = `<span class="font-bold text-yellow-400">Target</span> <span class="text-slate-200">${message.replace('Selected: ', '')}</span>`;
            
            container.appendChild(toast);
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateY(20px)';
                setTimeout(() => toast.remove(), 300);
            }, 2000);
        }

        // --- RENDER FUNCTIONS ---

        function renderTabs() {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                const isActive = btn.id === `tab-${currentTab}`;
                if (isActive) {
                    btn.classList.remove('text-blue-100', 'hover:bg-blue-600/50');
                    btn.classList.add('bg-white', 'text-blue-700', 'shadow-sm');
                } else {
                    btn.classList.add('text-blue-100', 'hover:bg-blue-600/50');
                    btn.classList.remove('bg-white', 'text-blue-700', 'shadow-sm');
                }
            });
        }

        function renderReader() {
            const container = document.getElementById('app-content');
            
            let html = `
                <div class="space-y-6 animate-fade-in">
                    <!-- Title Section -->
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-serif font-bold text-slate-900 mb-2 leading-tight">${articleData.title}</h2>
                        <h3 class="text-xl text-slate-600 font-medium">${articleData.chineseTitle}</h3>
                    </div>

                    <!-- Controls -->
                    <div class="flex justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-slate-200 sticky top-24 z-40">
                        <span class="font-bold text-slate-700 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-600"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
                            Reading Mode
                        </span>
                        <div class="flex items-center gap-3">
                            <span class="text-sm text-slate-500 font-medium hidden sm:inline">‰∏≠ÊñáÁøªË≠Ø</span>
                            <button onclick="toggleChinese()" class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${showChinese ? 'bg-blue-600' : 'bg-slate-200'}">
                                <span class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${showChinese ? 'translate-x-6' : 'translate-x-1'}"></span>
                            </button>
                        </div>
                    </div>

                    <!-- Paragraphs -->
                    <div class="space-y-6">
            `;

            articleData.paragraphs.forEach(para => {
                const highlightedEnglish = highlightKeywords(para.english, para.keywords);
                
                html += `
                    <div class="bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden hover:shadow-md transition-shadow">
                        <div class="p-5 md:p-6">
                            <div class="prose prose-lg text-slate-800 leading-relaxed mb-4 font-serif">
                                <p>${highlightedEnglish}</p>
                            </div>
                            <div class="translation-block relative mt-4 pt-4 border-t border-slate-100 ${showChinese ? '' : 'hidden'}">
                                <span class="absolute -top-3 left-4 bg-slate-50 text-xs font-bold text-slate-400 px-2 uppercase tracking-wide">Chinese</span>
                                <p class="text-slate-600 text-lg leading-relaxed">${para.chinese}</p>
                            </div>
                        </div>
                        <div class="bg-slate-50 px-6 py-3 flex justify-end border-t border-slate-100">
                             <button onclick="speak('${para.english.replace(/'/g, "\\'")}')" class="text-slate-500 hover:text-blue-600 flex items-center gap-2 text-sm font-bold transition-colors group">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="group-hover:scale-110 transition-transform"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/></svg>
                                Listen
                             </button>
                        </div>
                    </div>
                `;
            });

            html += `</div></div>`;
            container.innerHTML = html;
        }

        function renderVocab() {
            const container = document.getElementById('app-content');
            let html = `<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 animate-fade-in">`;

            vocabularyList.forEach((item, index) => {
                html += `
                <div class="h-64 perspective-1000 cursor-pointer group" onclick="this.querySelector('.card-inner').classList.toggle('rotate-y-180')">
                    <div class="card-inner relative w-full h-full duration-500 transform-style-3d transition-transform">
                        <!-- Front -->
                        <div class="absolute w-full h-full bg-white rounded-2xl shadow-md border-2 border-slate-100 flex flex-col items-center justify-center p-6 backface-hidden group-hover:border-blue-200 transition-colors">
                            <span class="text-xs text-blue-500 font-bold tracking-wider mb-2 uppercase">Click to flip</span>
                            <h3 class="text-3xl font-bold text-slate-800 mb-2">${item.word}</h3>
                            <span class="inline-block bg-slate-100 text-slate-500 text-xs px-2 py-1 rounded-full mb-6 font-mono">${item.part}</span>
                            <button onclick="event.stopPropagation(); speak('${item.word}')" class="p-3 bg-blue-50 text-blue-600 rounded-full hover:bg-blue-100 transition-colors shadow-sm hover:shadow">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/></svg>
                            </button>
                        </div>
                        
                        <!-- Back -->
                        <div class="absolute w-full h-full bg-blue-600 rounded-2xl shadow-md text-white flex flex-col items-center justify-center p-6 rotate-y-180 backface-hidden">
                            <h3 class="text-2xl font-bold mb-4 border-b border-blue-400 pb-2">${item.def}</h3>
                            <div class="text-center">
                                <p class="text-blue-100 italic text-lg leading-snug">"${item.example}"</p>
                            </div>
                        </div>
                    </div>
                </div>
                `;
            });

            html += `</div>`;
            container.innerHTML = html;
        }

        function renderQuiz() {
            const container = document.getElementById('app-content');
            let html = `<div class="max-w-2xl mx-auto space-y-8 animate-fade-in">`;

            quizQuestions.forEach((q, index) => {
                const userAnswer = quizAnswers[q.id];
                const isCorrect = userAnswer === q.correct;
                
                html += `
                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6 md:p-8">
                    <div class="flex items-start gap-4 mb-6">
                        <span class="bg-blue-100 text-blue-700 font-bold rounded-lg w-8 h-8 flex items-center justify-center flex-shrink-0 text-sm">
                            ${index + 1}
                        </span>
                        <h3 class="text-xl font-semibold text-slate-800 pt-1">${q.question}</h3>
                    </div>
                    <div class="space-y-3 pl-0 md:pl-12">
                `;

                q.options.forEach((opt, optIdx) => {
                    let btnClass = "w-full text-left p-4 rounded-xl border-2 transition-all duration-200 flex items-center justify-between group outline-none ";
                    
                    if (quizSubmitted) {
                        if (optIdx === q.correct) {
                            btnClass += "bg-green-50 border-green-500 text-green-700 font-bold";
                        } else if (userAnswer === optIdx) {
                            btnClass += "bg-red-50 border-red-300 text-red-700 opacity-75";
                        } else {
                            btnClass += "border-slate-100 text-slate-400 opacity-50";
                        }
                    } else {
                        if (userAnswer === optIdx) {
                            btnClass += "border-blue-500 bg-blue-50 text-blue-700 font-bold ring-2 ring-blue-200";
                        } else {
                            btnClass += "border-slate-100 text-slate-600 hover:border-blue-200 hover:bg-slate-50";
                        }
                    }

                    // Icon for result
                    let iconHtml = "";
                    if (quizSubmitted) {
                        if (optIdx === q.correct) iconHtml = `<svg class="text-green-600 h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>`;
                        else if (userAnswer === optIdx) iconHtml = `<svg class="text-red-500 h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>`;
                    }

                    const clickHandler = quizSubmitted ? '' : `onclick="selectOption(${q.id}, ${optIdx})"`;

                    html += `
                        <button ${clickHandler} class="${btnClass}" ${quizSubmitted ? 'disabled' : ''}>
                            <span>${opt}</span>
                            ${iconHtml}
                        </button>
                    `;
                });

                html += `</div></div>`;
            });

            // Footer / Submit Area
            html += `<div class="flex justify-center pt-4 pb-12">`;
            
            if (!quizSubmitted) {
                const answeredCount = Object.keys(quizAnswers).length;
                const totalCount = quizQuestions.length;
                const isComplete = answeredCount === totalCount;
                
                html += `
                    <button onclick="submitQuiz()" 
                        class="bg-blue-600 text-white px-10 py-4 rounded-full font-bold text-lg shadow-xl hover:bg-blue-700 transition-all transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"
                        ${!isComplete ? 'disabled' : ''}>
                        ${isComplete ? 'Submit Answers Êèê‰∫§Á≠îÊ°à' : `Answer All Questions (${answeredCount}/${totalCount})`}
                    </button>
                `;
            } else {
                let score = 0;
                quizQuestions.forEach(q => {
                    if (quizAnswers[q.id] === q.correct) score++;
                });
                
                html += `
                    <div class="bg-slate-800 text-white px-10 py-8 rounded-3xl text-center shadow-2xl w-full md:w-auto animate-bounce-in">
                        <p class="text-slate-400 uppercase text-xs font-bold tracking-widest mb-2">FINAL SCORE</p>
                        <div class="text-5xl font-black mb-3 text-yellow-400 font-mono tracking-tight">${score} / ${quizQuestions.length}</div>
                        <p class="text-slate-300 font-medium mb-6">
                            ${score === quizQuestions.length ? "Perfect! ü•á Olympic Champion!" : "Good effort! Keep practicing."}
                        </p>
                        <button onclick="resetQuiz()" class="text-blue-300 hover:text-white underline text-sm transition-colors">
                            Retake Quiz ÈáçÊñ∞Ê∏¨È©ó
                        </button>
                    </div>
                `;
            }
            
            html += `</div></div>`;
            container.innerHTML = html;
        }

        // --- ACTIONS ---

        window.switchTab = function(tab) {
            currentTab = tab;
            renderTabs();
            if (tab === 'read') renderReader();
            else if (tab === 'vocab') renderVocab();
            else if (tab === 'quiz') renderQuiz();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        };

        window.toggleChinese = function() {
            showChinese = !showChinese;
            renderReader(); // Re-render to update view
        };

        window.selectOption = function(qId, optIdx) {
            quizAnswers[qId] = optIdx;
            renderQuiz(); // Re-render to show selection state
        };

        window.submitQuiz = function() {
            quizSubmitted = true;
            renderQuiz();
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        };

        window.resetQuiz = function() {
            quizAnswers = {};
            quizSubmitted = false;
            renderQuiz();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            switchTab('read');
        });

    </script>
</body>
</html>